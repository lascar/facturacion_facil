<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Syntax Fix - Tutorial T√©cnico</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîß Test de Correcci√≥n de Sintaxis</h1>
            <p>Verificaci√≥n de que no aparecen "keyword">, "string">, etc.</p>
        </div>

        <div class="alert alert-success">
            <h4>‚úÖ Problema Identificado y Corregido</h4>
            <p>El problema de las etiquetas HTML visibles como <code>"keyword"&gt;</code>, <code>"string"&gt;</code> ha sido <strong>completamente resuelto</strong> deshabilitando la coloration syntaxique problem√°tica.</p>
        </div>

        <div class="card">
            <div class="card-header">
                üêõ Explicaci√≥n del Problema
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <h3>‚ùå Qu√© Causaba el Problema</h3>
                        <ol>
                            <li><strong>JavaScript obten√≠a</strong> <code>innerHTML</code> del bloque de c√≥digo</li>
                            <li><strong>Aplicaba replace()</strong> para a√±adir etiquetas HTML como <code>&lt;span class="keyword"&gt;</code></li>
                            <li><strong>Establec√≠a innerHTML</strong> con el nuevo contenido</li>
                            <li><strong>El navegador interpretaba</strong> las nuevas etiquetas como texto, no como HTML</li>
                            <li><strong>Resultado:</strong> Se ve√≠an literalmente <code>"keyword"&gt;</code>, <code>"string"&gt;</code></li>
                        </ol>
                    </div>
                    <div class="col">
                        <h3>‚úÖ C√≥mo se Solucion√≥</h3>
                        <ol>
                            <li><strong>Deshabilitamos</strong> la funci√≥n <code>applySyntaxHighlighting()</code></li>
                            <li><strong>Comentamos</strong> los estilos CSS de coloration</li>
                            <li><strong>Mantenemos</strong> el dise√±o visual atractivo de los bloques</li>
                            <li><strong>Preservamos</strong> todas las otras funcionalidades (copia, detecci√≥n de lenguaje)</li>
                            <li><strong>Resultado:</strong> C√≥digo limpio sin artefactos visuales</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                üß™ Test de C√≥digo Python - Debe estar LIMPIO
            </div>
            <div class="card-body">
                <p>Este bloque de c√≥digo Python NO debe mostrar "keyword">, "string">, etc.:</p>
                <pre><code>class ProductoController:
    def __init__(self, db_manager):
        self.db = db_manager
        self.validator = ProductoValidator()
        self.logger = logging.getLogger(__name__)
    
    def crear_producto(self, datos):
        """Crear nuevo producto con validaci√≥n"""
        try:
            # Validar datos
            errores = self.validator.validate(datos)
            if errores:
                raise ValidationError(errores)
            
            # Crear producto
            producto = Producto.create(**datos)
            
            # Log de auditor√≠a
            self.logger.info(f"Producto creado: {producto.referencia}")
            
            return producto
            
        except Exception as e:
            self.logger.error(f"Error creando producto: {e}")
            raise</code></pre>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                üß™ Test de C√≥digo JavaScript - Debe estar LIMPIO
            </div>
            <div class="card-body">
                <p>Este bloque de c√≥digo JavaScript NO debe mostrar etiquetas HTML:</p>
                <pre><code>function initializeCodeBlocks() {
    document.querySelectorAll('pre').forEach((pre, index) => {
        // Add copy functionality
        pre.addEventListener('click', function(e) {
            if (e.target === this || e.target.tagName === 'CODE') {
                copyCodeToClipboard(this);
            }
        });
        
        // Add language detection
        const code = pre.querySelector('code');
        if (code) {
            const text = code.textContent;
            const language = detectLanguage(text);
            pre.setAttribute('data-lang', language);
        }
    });
}</code></pre>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                üß™ Test de C√≥digo SQL - Debe estar LIMPIO
            </div>
            <div class="card-body">
                <p>Este bloque de c√≥digo SQL NO debe mostrar artefactos:</p>
                <pre><code>SELECT p.nombre, p.precio, s.cantidad_actual
FROM productos p
LEFT JOIN stock s ON p.id = s.producto_id
WHERE p.categoria = 'Electr√≥nica'
  AND s.cantidad_actual > 0
ORDER BY p.nombre ASC
LIMIT 50;</code></pre>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                ‚úÖ Funcionalidades que S√ç Funcionan
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <h3>üé® Dise√±o Visual</h3>
                        <ul>
                            <li><span class="status-ok">‚úÖ</span> <strong>Fondo degradado</strong> - Tema oscuro atractivo</li>
                            <li><span class="status-ok">‚úÖ</span> <strong>Bordes y sombras</strong> - Efectos visuales</li>
                            <li><span class="status-ok">‚úÖ</span> <strong>Fuentes monospace</strong> - Tipograf√≠a profesional</li>
                            <li><span class="status-ok">‚úÖ</span> <strong>Efectos hover</strong> - Interactividad visual</li>
                        </ul>
                    </div>
                    <div class="col">
                        <h3>üîß Funcionalidades</h3>
                        <ul>
                            <li><span class="status-ok">‚úÖ</span> <strong>Copia en un clic</strong> - Funciona perfectamente</li>
                            <li><span class="status-ok">‚úÖ</span> <strong>Detecci√≥n de lenguaje</strong> - Atributo data-lang</li>
                            <li><span class="status-ok">‚úÖ</span> <strong>Feedback visual</strong> - "Copied!" al copiar</li>
                            <li><span class="status-ok">‚úÖ</span> <strong>Responsive design</strong> - Adaptaci√≥n m√≥vil</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="alert alert-info">
            <h4>üí° Alternativas Futuras para Syntax Highlighting</h4>
            <p>Si en el futuro queremos implementar coloration syntaxique, podr√≠amos usar:</p>
            <ul>
                <li><strong>Prism.js</strong> - Librer√≠a especializada y robusta</li>
                <li><strong>Highlight.js</strong> - Detecci√≥n autom√°tica de lenguajes</li>
                <li><strong>CodeMirror</strong> - Editor de c√≥digo completo</li>
                <li><strong>CSS-only highlighting</strong> - Usando pseudo-elementos avanzados</li>
            </ul>
            <p>Por ahora, el c√≥digo es <strong>perfectamente legible</strong> sin coloration, y todas las otras funcionalidades funcionan correctamente.</p>
        </div>

        <div class="card">
            <div class="card-header">
                üéØ Verificaci√≥n Manual
            </div>
            <div class="card-body">
                <div class="alert alert-success">
                    <h4>‚úÖ Lista de Verificaci√≥n</h4>
                    <p>Confirma que en TODOS los bloques de c√≥digo de esta p√°gina:</p>
                    <ul>
                        <li><span class="status-ok">‚úÖ</span> <strong>NO aparece</strong> <code>"keyword"&gt;</code></li>
                        <li><span class="status-ok">‚úÖ</span> <strong>NO aparece</strong> <code>"string"&gt;</code></li>
                        <li><span class="status-ok">‚úÖ</span> <strong>NO aparece</strong> <code>"comment"&gt;</code></li>
                        <li><span class="status-ok">‚úÖ</span> <strong>NO aparece</strong> <code>"function"&gt;</code></li>
                        <li><span class="status-ok">‚úÖ</span> <strong>NO aparece</strong> <code>"number"&gt;</code></li>
                        <li><span class="status-ok">‚úÖ</span> <strong>El c√≥digo se ve</strong> limpio y profesional</li>
                        <li><span class="status-ok">‚úÖ</span> <strong>La funcionalidad de copia</strong> funciona al hacer clic</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                üìä C√≥digo de Ejemplo Complejo
            </div>
            <div class="card-body">
                <p>Test final con c√≥digo complejo que anteriormente mostraba muchos artefactos:</p>
                <pre><code>class Database:
    """Singleton para gesti√≥n de base de datos"""
    _instance = None
    
    def __new__(cls, db_path="facturacion.db"):
        if cls._instance is None:
            cls._instance = super().__new__(cls)
            cls._instance.db_path = db_path
            cls._instance.logger = get_logger("database")
            cls._instance.init_database()
        return cls._instance
    
    def execute_query(self, query, params=None):
        """Ejecuta una consulta y devuelve los resultados"""
        conn = self.get_connection()
        cursor = conn.cursor()
        
        try:
            log_database_operation(query, params)
            
            if params:
                cursor.execute(query, params)
            else:
                cursor.execute(query)
            
            if query.strip().upper().startswith(('SELECT', 'PRAGMA')):
                results = cursor.fetchall()
                return results
            else:
                conn.commit()
                return cursor.lastrowid
                
        except Exception as e:
            conn.rollback()
            log_exception(e, f"Error ejecutando query: {query}")
            raise
        finally:
            conn.close()</code></pre>
            </div>
        </div>

        <div class="footer">
            <p>&copy; 2024 Facturaci√≥n F√°cil - Test de Correcci√≥n de Sintaxis</p>
        </div>
    </div>

    <script src="enhance_code_blocks.js"></script>
    
    <script>
        // Verificaci√≥n adicional
        window.addEventListener('load', function() {
            console.log('Testing syntax fix...');
            
            // Verificar que no hay etiquetas HTML visibles en el c√≥digo
            document.querySelectorAll('pre code').forEach((code, index) => {
                const text = code.textContent;
                const hasHtmlTags = text.includes('keyword">') || text.includes('string">') || 
                                   text.includes('comment">') || text.includes('function">');
                
                if (hasHtmlTags) {
                    console.error(`Code block ${index} still has HTML tag artifacts!`);
                } else {
                    console.log(`Code block ${index} is clean ‚úÖ`);
                }
            });
            
            console.log('Syntax fix verification complete');
        });
    </script>
</body>
</html>
